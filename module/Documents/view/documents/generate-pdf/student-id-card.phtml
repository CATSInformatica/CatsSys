<section class="content">
    <p><?php echo $this->message; ?></p>

    <div class="row">
        <?php
        if ($form) :
            $form->prepare();
            echo $this->form()->openTag($form);
        ?>
            <div class="col-xs-10 col-xs-offset-1">
                <div class="box box-warning">
                    <div class="box-header with-border">
                        <h3 class="box-title">Data de validade</h3>

                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i> </button>
                        </div>
                        <!-- /.box-tools -->
                    </div>
                    <!-- /.box-header -->
                    <div class="box-body">
                        <?php if ($this->form !== null) :
                            $expiryDateElement = $form->get('expiry_date');

                            echo $this->formElementErrors($expiryDateElement, array('class' => 'text-bold text-red'));
                        endif; ?>

                        <div class="form-group">
                            <div class="row">
                                <div class="col-md-12">
                                    <div id="expiry-date"></div>
                                </div>
                            </div>
                        </div>

                        <input type="hidden" name="expiryDate" id="expiry-date-input">

                    </div>
                    <!-- /.box-body -->
                </div>

                <div class="box box-success">
                    <div class="box-header with-border">
                        <h3 class="box-title">Fundo da carteirinha</h3>

                        <div class="box-tools pull-right">
                            <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i> </button>
                        </div>
                        <!-- /.box-tools -->
                    </div>
                    <!-- /.box-header -->
                    <div class="box-body">
                        <?php if ($this->form !== null) : 
                            $bgConfigElement = $form->get('config_id');

                            echo $this->formElementErrors($bgConfigElement, array('class' => 'text-bold text-red'));
                        endif; ?>

                        <?php 
                            echo $this->partial(
                                'student-bg-configs/template', 
                                ['configs' => $this->configs]
                            );
                        ?>

                        <input type="hidden" name="bgConfigId" id="bg-config-id-input">
                    </div>
                    <!-- /.box-body -->
                </div>

                <?php
                echo $this->partial('students-board-form/template', array(
                    'form' => $this->form,
                    'classes' => $this->classes
                ));
                ?>

                <div class="col-xs-6 col-xs-offset-3">
                    <button type="submit" class="btn btn-block bg-green" id="generate-id-cards">Gerar carteirinhas</button>
                </div>
            </div>
        <?php 
            echo $this->form()->closeTag(); 
        endif;
        ?>
    </div>
</section>

<script>

    appConfig = (function () {
        var scriptSrc = 'app/pages/documents/generate-pdf/student-id-card';

        return {
            getScriptSrc: function () {
                return scriptSrc;
            }
        };

    })();

</script>